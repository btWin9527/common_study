# 移动端兼容

## 1. 移动端字体设置

```css
body {
     font-family: -apple-system,BlinkMacSystemFont,"PingFang SC"," Helvetica Neue",STHeiti," Microsoft Yahei",Tahoma,Simsun,sans-serif ;

}
```

## 2. 1px边框线兼容实现

```html
<!-- HTML部分 -->
<div class='class1'></div>
```

```less

/*css部分：*/
.class1{
	border: 1px solid #ccc;
}

/*css部分*/
/*移动端正常展示1px的问题 start*/
%border-1px{
    display: block;
    position:absolute;
    left: 0;
    width: 100%;
    content: ' ';
}
.border-1px{
    position: relative;
    &::after{
        @extend %border-1px;
        bottom: 0;
        border-top: 1px solid #ccc;
    }
    &::before{
        @extend %border-1px;
        top: 0;
        border-bottom: 1px solid #ccc;
    }
}

@media (-webkit-min-device-pixel-ratio:1.5),(min-device-pixel-ratio:1.5){
    .border-1px{
        &::after{
            -webkit-transform: scaleY(0.7);
            transform: scaleY(0.7);
        }
    }
}

@media (-webkit-min-device-pixel-ratio:2),(min-device-pixel-ratio:2){
    .border-1px{
        &::after{
            -webkit-transform: scaleY(0.5);
            transform: scaleY(0.5);
        }
    }
}
/*移动端正常展示1px的问题 end*/



```

## 3. ios中常见兼容问题

**3.1 ios中input问题**

> ios下input设置type=button属性disabled设置true,会出现样式文字和背景异常问题，使用opacity=1来解决;

> input为fixed定位在ios下的bug问题，点击焦点input，input跳到中间位置，可以使用内容滚动框也是fixed来设置;

> input 有placeholder情况下不要设置行高，否则会偏上

**3.2 ios中点击事件**
> 一些情况下对非可点击元素如(label,span)监听click事件，ios下不会触发，css增加cursor:pointer就搞定了

**3.3 点击300ms延时**
> click 300ms 延时响应 使用 Fastclick
  window.addEventListener( "load", function() {
  FastClick.attach( document.body );
  }, false );
  
## 4. app与h5混合开发

**4.1 js无法正确解析到url包含"="号的参数值**
> 【问题】：项目中，由于数据请求的参数值是从url地址中获取的参数值，并且参数值包含"="号，导致无法正确解析到参数值(ps:js使用"="号分割url的参数)

> 【解决方法】：将url进行转码，再解码【本项目中，APP端提供转码后的url地址，前端使用geturlparams插件，获得url地址的参数值】

```js
/* 
* 插件地址: https://www.cnblogs.com/zagelover/articles/2756665.html
* */
//解码"="号
dom.token = decodeURI($.query.get("token"));//插件
//获取无需解码的值
dom.msgid = $.query.get("msgid");
```
**==4.2 ios中日期显示为NaN==**

> 【问题描述1】：Date的日期格式，在ios中有兼容性问题，ios的日期会显示成：NaN

```js
/*
* 解决方案：
* 在ios中支持"2017/12/26 19:36:00"，而不支持"2017-12-26 19:36:00"格式，后面一种格式，在ios中显示Nan （Android中都可以显示正常）
* */
var time = "2017-12-26 19:36:00";
time = time.replace(/\-/g, "/");//将时间格式的'-'转成'/'形式，兼容iOS
```

> 【问题描述2】:后台提供的时间格式缀有“.0”，导致ios解析失败，ios日期显示：NaN问题

```js
/*
* 解决方案：去掉时间格式的".0"后缀
* */
var time = "2018-07-09 09:13:53.0";
//法一：
time = time.substr(0,time.length-2);  //解决时间后面缀有.0的情况【去掉.0】
//法二：
time = time.slice(0,time.indexOf("."));  //本人使用此方法

```

## 剩余问题待添加
